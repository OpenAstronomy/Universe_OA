<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Moving towards OpenCL | Universe OpenAstronomy</title>
<link href="../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../../rss.xml">
<link rel="canonical" href="http://openastronomy.org/Universe_OA/posts/2023/07/20230728_0000_labeeb-7z/">
<!--[if lt IE 9]><script src="../../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Labib Asari">
<link rel="prev" href="../20230725_0000_1someshverma/" title="Refactoring for Non-equilibrium Calculations" type="text/html">
<link rel="next" href="../20230728_0000_gaurav17joshi/" title="GSoC - Week 7-8" type="text/html">
<meta property="og:site_name" content="Universe OpenAstronomy">
<meta property="og:title" content="Moving towards OpenCL">
<meta property="og:url" content="http://openastronomy.org/Universe_OA/posts/2023/07/20230728_0000_labeeb-7z/">
<meta property="og:description" content="Background

So far, all my work on GPUs has been using CUDA. But CUDA is proprietary to NVIDIA and only works on NVIDIA GPUs. So, I‚Äôve been working on moving the code to OpenCL, which is an open stand">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-07-28T00:00:00+01:00">
<meta property="article:tag" content="gnuastro">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark
bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="../../../../">

            <span id="blog-title">Universe OpenAstronomy</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../../../archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../../../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../../../rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
<ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
            <style>
@media screen and (max-width: 600px) {
.table-done {
    visibility: hidden;
    clear: both;
    padding: 0px 300px;
    width: 50%;
    display: block;
  }
}
            </style>
<div class="sidebar" style="width:100%; max-width:100%; float:initial; margin:0px;"><ul>
<li>
                   <img src="https://github.com/juliaastro.png?size=40" height="16" width="16"><a href="https://kashish2210.blogspot.com" data-toggle="tooltip" data-placement="top" title="2025-05-26 18:44:00+01:00">
                    kashish shrivastav
                   </a>
                   <span class="table-done" style="float: right; padding-right:600px;"><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2025-05-01 - 2025-06-02">‚úÖ</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2025-06-02 - 2025-06-16">üî≤</span><span style="display:table-cell; width:7%;opacity: 0.5;" data-toggle="tooltip" title="2025-06-16 - 2025-06-30">üî≤</span><span style="display:table-cell; width:7%;opacity: 0.5;" data-toggle="tooltip" title="2025-06-30 - 2025-07-14">üî≤</span><span style="display:table-cell; width:7%;opacity: 0.5;" data-toggle="tooltip" title="2025-07-14 - 2025-07-28">üî≤</span><span style="display:table-cell; width:7%;opacity: 0.5;" data-toggle="tooltip" title="2025-07-28 - 2025-08-11">üî≤</span><span style="display:table-cell; width:7%;opacity: 0.5;" data-toggle="tooltip" title="2025-08-11 - 2025-08-25">üî≤</span></span>
                </li>
<li>
                   <img src="https://github.com/StingraySoftware.png?size=40" height="16" width="16"><a href="https://sejifukishima.blogspot.com" data-toggle="tooltip" data-placement="top" title="2025-06-04 18:03:00+01:00">
                    Mohammad Adnan
                   </a>
                   <span class="table-done" style="float: right; padding-right:600px;"><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2025-05-01 - 2025-06-02">‚ùå</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2025-06-02 - 2025-06-16">‚úÖ</span><span style="display:table-cell; width:7%;opacity: 0.5;" data-toggle="tooltip" title="2025-06-16 - 2025-06-30">üî≤</span><span style="display:table-cell; width:7%;opacity: 0.5;" data-toggle="tooltip" title="2025-06-30 - 2025-07-14">üî≤</span><span style="display:table-cell; width:7%;opacity: 0.5;" data-toggle="tooltip" title="2025-07-14 - 2025-07-28">üî≤</span><span style="display:table-cell; width:7%;opacity: 0.5;" data-toggle="tooltip" title="2025-07-28 - 2025-08-11">üî≤</span><span style="display:table-cell; width:7%;opacity: 0.5;" data-toggle="tooltip" title="2025-08-11 - 2025-08-25">üî≤</span></span>
                </li>
</ul></div>
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Moving towards OpenCL</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../../../authors/labib-asari/">Labib Asari</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-07-28T00:00:00+01:00" itemprop="datePublished" title="2023-07-28 00:00">2023-07-28 00:00</time></a>
            </p>
            

                    <p class="linkline"><a href="https://labeeb-7z.github.io/Blogs/2023/07/28/Towards-OpenCL.html">Original site</a></p>
        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <h3 id="background">Background</h3>

<p>So far, all my work on GPUs has been using CUDA. But CUDA is proprietary to NVIDIA and only works on NVIDIA GPUs. So, I‚Äôve been working on moving the code to OpenCL, which is an open standard for parallel programming on heterogeneous systems.</p>
<!-- TEASER_END -->

<h3 id="opencl">OpenCL</h3>

<p><a href="https://www.khronos.org/opencl/">OpenCL</a>(Open Computing Language) is an open standard for cross-platform, parallel programming of diverse accelerators(CPUs, GPUs, FPGAs, etc) found in supercomputers, cloud servers, personal computers, mobile devices and embedded platforms.
Note the 2 key points -</p>
<ul>
<li>
<code class="language-plaintext highlighter-rouge">open standard</code> : this means that the specification and documentation of the technology are publicly available and can be accessed by anyone.</li>
<li>
<code class="language-plaintext highlighter-rouge">cross-platform</code> : this means that it can run on multiple operating systems and hardware architectures without requiring major modifications to the code.</li>
</ul>
<p>This makes OpenCL a very attractive option for developers who want to write code that can run on a wide range of devices. From Gnuastro‚Äôs perspective, this means that we can write code that can run on multiple GPU manufactureres, as well as CPUs and other accelerators. Our GPU kernels will be portable to any system, regardless of its configuration!</p>

<p>Next point to consider is OpenCL is a <code class="language-plaintext highlighter-rouge">standard</code>. It is different from CUDA in this regard. CUDA is a framework, whereas OpenCL is a standard. What does this mean?</p>

<ul>
<li>The OpenCL standard refers to the specification and guidelines set forth by the Khronos Group which is responsible for developing and maintaining the standard. The OpenCL standard defines the API, data types, functions, and programming model that developers must follow when writing code for OpenCL. It is a formal document that ensures uniformity and compatibility across different OpenCL implementations.</li>
</ul>
<p>OpenCL is not an open-source library! It basically defines how the library should behave(big simplification!).</p>

<p>So what can we do with the standard alone? Not much! We need an <code class="language-plaintext highlighter-rouge">implementation of the standard</code>.</p>

<p>This also reminds me of the question I once had - What do you need to create a new programming language?
My first guess was a compiler! My thought process was if a program(compiler in this case) can understand my High level language and convert it to corresponding machine code, then I can write programs in that high level language for any task!
So all I‚Äôd need is a compiler for that language.
Its close, but not totally accurate.</p>

<p>You dont actually need a compiler for a new programming language. You ONLY need a <code class="language-plaintext highlighter-rouge">specification</code> for it. The specification will define the syntax and semantics(rules) of the language.
You only need a compiler when you want to run programs using your language!(what good is a language if you cant run programs using it? haha)</p>

<p>Similaraly OpenCL defines a set of rules which specify how it will behave. But to use OpenCL we need an implementation of this standard.</p>
<ul>
<li>OpenCL implementations are software packages developed by hardware manufactureres that provide the necessary drivers and runtime libraries for running OpenCL applications on their specific hardware. Each hardware vendor is responsible for creating their own OpenCL implementation that conforms to the OpenCL standard. This means that each implementation may have its own unique features and quirks, but they all adhere to the same standard.</li>
</ul>
<p>There are many different implementations available for it! (find the full list <a href="https://www.khronos.org/conformance/adopters/conformant-products/opencl">here</a> or <a href="https://www.iwocl.org/resources/opencl-implementations/">here</a>).</p>

<p>Basically each of the hardware manfacturers provide an implementation of the OpenCL standard for their hardware. This implementation is usually provided as a framework. Depending on what hardware you have on your system, you can choose the corresponding framework to use.</p>

<h3 id="how-does-opencl-work">How does OpenCL work?</h3>

<p>Here‚Äôs waht a typical OpenCL system looks like :</p>

<p><img alt="opencl-sytem" src="https://labeeb-7z.github.io/Blogs/img/posts/opencl/opencl-system.png"></p>

<p>OpenCL programs consist of two parts: host code and device code. The host code is written in C or C++ and runs on the host, while the device code is written in OpenCL C and runs on the device. The host code is responsible for setting up the OpenCL environment, creating the context, compiling the device code, and executing the kernels on the device.</p>

<p>The device code is compiled at runtime by the host code. This means that the host code must be compiled first, and then the device code can be compiled. The host code is compiled using a standard C/C++ compiler, while the device code is compiled using the OpenCL compiler. The OpenCL compiler is provided by the OpenCL implementation and is responsible for compiling the device code into binary code that can be executed on the device.</p>

<p>How does the OpenCL library interact with the hardware? Its made possible through OpenCL-ICD.</p>

<p>OpenCL ICD stands for OpenCL Installable Client Driver. It is a component of the OpenCL</p>

<p>It enables multiple manufacturers OpenCL drivers to coexist on a single system. Instead of having a single monolithic OpenCL driver, an ICD allows different manufactureres (e.g., NVIDIA, AMD, Intel) to provide their own separate OpenCL implementation as dynamically loadable libraries. This means that developers can select the appropriate OpenCL driver at runtime without needing to modify their applications.</p>

<p>The ICD mechanism is crucial for achieving portability and flexibility in developing applications using computational power of various devices from different manufacturers.</p>

<h3 id="opencl-programming-model">OpenCL Programming Model</h3>

<p>The Programming Model of OpenCL is very similar to CUDA which I covered in my previous post. However CUDA has a lot of abstraction since it has its own runtime library which communicates with the driver.
In OpenCL there‚Äôs direct communication with the drivers and the host code is responsible for setting up the environment so its a bit more lower level than CUDA.</p>

<p>Some of the key terms in OpenCL are :</p>

<ul>
<li>Work Item: Basic unit of work on a compute device</li>
<li>Kernel: The code that runs on a work item (Basically a C function)</li>
<li>Program: Collection of kernels and other functions</li>
<li>Context: The environment where work-items execute (Devices, their memories and command queues)</li>
<li>Command Queue: Queue used by the host to submit work (kernels, memory copies) to the device.</li>
</ul>
<p>I‚Äôll cover the programming aspect of OpenCL in more detail in my next post.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../../categories/gnuastro/" rel="tag">gnuastro</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../20230725_0000_1someshverma/" rel="prev" title="Refactoring for Non-equilibrium Calculations">Previous post</a>
            </li>
            <li class="next">
                <a href="../20230728_0000_gaurav17joshi/" rel="next" title="GSoC - Week 7-8">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer">
            Contents ¬© 2025         <a href="mailto:openastronomy@openastronomy.com">OpenAstronomy</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
<img alt="Creative Commons License BY-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>
            
            
        </footer>
</div>
</div>


        <script src="../../../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
