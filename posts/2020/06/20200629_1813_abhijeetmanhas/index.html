<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>GSoC 2020: Generalization of Clients | Universe OpenAstronomy</title>
<link href="../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../../rss.xml">
<link rel="canonical" href="http://openastronomy.org/Universe_OA/posts/2020/06/20200629_1813_abhijeetmanhas/">
<!--[if lt IE 9]><script src="../../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Abhijeet Manhas">
<link rel="prev" href="../20200629_0011_theand9/" title="gsoc_journey.update({“Chapter 1”: [“Community Bonding Phase”, “Stingray”]})" type="text/html">
<link rel="next" href="../20200629_1911_kakirastern/" title="GSoC 2020: glue-solar project 1.2" type="text/html">
<meta property="og:site_name" content="Universe OpenAstronomy">
<meta property="og:title" content="GSoC 2020: Generalization of Clients">
<meta property="og:url" content="http://openastronomy.org/Universe_OA/posts/2020/06/20200629_1813_abhijeetmanhas/">
<meta property="og:description" content="Solar Eclipse 2020 in Vadodara, Gujarat (Lucky Enough to witness it this year!)This fortnight, I worked around iterating over different designs for redesigning the Dataretriever Clients so that its im">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-06-29T18:13:52+01:00">
<meta property="article:tag" content="SunPy">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark
bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="../../../../">

            <span id="blog-title">Universe OpenAstronomy</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../../../archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../../../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../../../rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
<ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
            <style>
@media screen and (max-width: 600px) {
.table-done {
    visibility: hidden;
    clear: both;
    padding: 0px 300px;
    width: 50%;
    display: block;
  }
}
            </style>
<div class="sidebar" style="width:100%; max-width:100%; float:initial; margin:0px;"><ul>
<li>
                   <img src="https://cdn.rawgit.com/sunpy/sunpy-logo/master/generated/sunpy_icon.svg" height="16" width="16"><a href="https://dev.to/ahmedhosssam" data-toggle="tooltip" data-placement="top" title="2024-07-11 19:38:21+01:00" style="color:rgb(255,0,0)">
                    Ahmed Hossam
                   </a>
                   <span class="table-done" style="float: right; padding-right:600px;"><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-05-27 - 2024-06-10">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-10 - 2024-06-24">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-24 - 2024-07-01">❌</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-01 - 2024-07-15">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-15 - 2024-07-29">❌</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-29 - 2024-08-12">❌</span></span>
                </li>
<li>
                   <img src="https://openastronomy.org/img/members/radis_ico.png" height="16" width="16"><a href="http://code29563.github.io" data-toggle="tooltip" data-placement="top" title="2024-08-25 00:00:00+01:00" style="color:rgb(255,0,0)">
                    code29563
                   </a>
                   <span class="table-done" style="float: right; padding-right:600px;"><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-05-27 - 2024-06-10">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-10 - 2024-06-24">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-24 - 2024-07-01">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-01 - 2024-07-15">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-15 - 2024-07-29">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-29 - 2024-08-12">✅</span></span>
                </li>
<li>
                   <img src="https://openastronomy.org/img/members/gnuastro.svg" height="16" width="16"><a href="https://deadspheroid.github.io" data-toggle="tooltip" data-placement="top" title="2024-10-06 22:30:00+01:00">
                    DeadSpheroid
                   </a>
                   <span class="table-done" style="float: right; padding-right:600px;"><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-05-27 - 2024-06-10">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-10 - 2024-06-24">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-24 - 2024-07-01">❌</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-01 - 2024-07-15">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-15 - 2024-07-29">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-29 - 2024-08-12">❌</span></span>
                </li>
<li>
                   <img src="https://cdn.rawgit.com/sunpy/sunpy-logo/master/generated/sunpy_icon.svg" height="16" width="16"><a href="https://deus1704.vercel.app" data-toggle="tooltip" data-placement="top" title="2024-07-22 18:59:31+01:00" style="color:rgb(255,0,0)">
                    Deus1704
                   </a>
                   <span class="table-done" style="float: right; padding-right:600px;"><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-05-27 - 2024-06-10">❌</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-10 - 2024-06-24">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-24 - 2024-07-01">❌</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-01 - 2024-07-15">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-15 - 2024-07-29">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-29 - 2024-08-12">❌</span></span>
                </li>
<li>
                   <img src="https://github.com/StingraySoftware.png?size=40" height="16" width="16"><a href="https://gsoc2024.kartikmandar.com" data-toggle="tooltip" data-placement="top" title="2024-08-26 16:26:00+01:00" style="color:rgb(255,0,0)">
                    Kartik Mandar
                   </a>
                   <span class="table-done" style="float: right; padding-right:600px;"><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-05-27 - 2024-06-10">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-10 - 2024-06-24">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-24 - 2024-07-01">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-01 - 2024-07-15">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-15 - 2024-07-29">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-29 - 2024-08-12">✅</span></span>
                </li>
<li>
                   <img src="https://github.com/fornax-navo.png?size=40" height="16" width="16"><a href="https://lucasmartingarciagsoc24openastronomy.blogspot.com" data-toggle="tooltip" data-placement="top" title="2024-09-12 16:35:00+01:00" style="color:rgb(255,0,0)">
                    Lucas Martin Garcia
                   </a>
                   <span class="table-done" style="float: right; padding-right:600px;"><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-05-27 - 2024-06-10">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-10 - 2024-06-24">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-24 - 2024-07-01">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-01 - 2024-07-15">❌</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-15 - 2024-07-29">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-29 - 2024-08-12">✅</span></span>
                </li>
<li>
                   <img src="https://cdn.rawgit.com/sunpy/sunpy-logo/master/generated/sunpy_icon.svg" height="16" width="16"><a href="https://medium.com/@manitsingh018" data-toggle="tooltip" data-placement="top" title="2024-08-23 17:10:53+01:00" style="color:rgb(255,0,0)">
                    Manit Singh
                   </a>
                   <span class="table-done" style="float: right; padding-right:600px;"><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-05-27 - 2024-06-10">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-10 - 2024-06-24">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-24 - 2024-07-01">❌</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-01 - 2024-07-15">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-15 - 2024-07-29">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-29 - 2024-08-12">❌</span></span>
                </li>
<li>
                   <img src="https://cdn.rawgit.com/sunpy/sunpy-logo/master/generated/sunpy_icon.svg" height="16" width="16"><a href="https://viciouseagle03.github.io" data-toggle="tooltip" data-placement="top" title="2024-08-24 11:17:02+01:00" style="color:rgb(255,0,0)">
                    ViciousEagle03
                   </a>
                   <span class="table-done" style="float: right; padding-right:600px;"><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-05-27 - 2024-06-10">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-10 - 2024-06-24">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-06-24 - 2024-07-01">❌</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-01 - 2024-07-15">❌</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-15 - 2024-07-29">✅</span><span style="display:table-cell; width:7%;" data-toggle="tooltip" title="2024-07-29 - 2024-08-12">❌</span></span>
                </li>
</ul></div>
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">GSoC 2020: Generalization of Clients</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../../../authors/abhijeet-manhas/">Abhijeet Manhas</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2020-06-29T18:13:52+01:00" itemprop="datePublished" title="2020-06-29 18:13">2020-06-29 18:13</time></a>
            </p>
            

                    <p class="linkline"><a href="https://medium.com/@abhimanhas/gsoc-2020-generalization-of-clients-1879f5dfe436?source=rss-7fac54a9b047------2">Original site</a></p>
        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <figure><img alt="" src="https://cdn-images-1.medium.com/max/800/0*EsjuLxEt1BrtrdCG"><figcaption>Solar Eclipse 2020 in Vadodara, Gujarat (Lucky Enough to witness it this year!)</figcaption></figure><p>This fortnight, I worked around iterating over different designs for redesigning the Dataretriever Clients so that its implementation can be simpler and more general. Generalization here means the ability to inherit most of the methods from the base class itself; therefore minimizing a number of similar methods in the subclasses.</p>
<h5>Show Method for QueryResponse</h5>
<p>I got<a href="https://github.com/sunpy/sunpy/pull/4309"> PR #4309</a> merged which solved an old <a href="https://github.com/sunpy/sunpy/issues/556">Issue #556</a>. A simple show() function in ~sunpy.net.base_client.BaseQueryResponse enabled QueryResponse objects for Dataretriever, VSO, and JSOC clients to specify the columns to be shown in the result.</p>
<p>This returns an ~astropy.table.Table instance, so table operations can also be easily performed on the result.</p>
<!-- TEASER_END -->
<iframe src="." width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/10fce45866473f2eb6ad74e7f98000eb/href">https://medium.com/media/10fce45866473f2eb6ad74e7f98000eb/href</a></iframe><h5>_extract_files_meta method in Scraper</h5>
<p><a href="https://github.com/sunpy/sunpy/pull/4313">PR #4313</a> was merged in sunpy:master that allows the scraper to extract the metadata stored in the file URLs. This function will prove very useful for refactoring the whole ~sunpy.net.dataretriever submodule.</p>
<p>A new module parse was added in ~sunpy.extern which allowed to specify the extractor which will parse the file URL and return a dict containing the value of attrs like Wavelength, Time, Level, etc. Even the URL is returned by the method, which ensures no changes are to be made in fetch() methods for clients.</p>
<iframe src="." width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/da15de642196febf9eab940219efac0f/href">https://medium.com/media/da15de642196febf9eab940219efac0f/href</a></iframe><h5>Playing with post filters</h5>
<p>Last fortnight I was working with post filters and concatenation of responses for VSO. Last week I dabbled a bit with post-filters for attrs used in all net clients. Using single_dispatch decorator over filter_results enabled post-filtering in dataretriver and VSO. It is pretty similar to the way it is done for ~sunpy.net.vso.attrs.</p>
<iframe src="." width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/274b4e0b885d17b391589d15c593f046/href">https://medium.com/media/274b4e0b885d17b391589d15c593f046/href</a></iframe><h4>Redesigning GenericClient</h4>
<p>So there is a draft <a href="https://github.com/sunpy/sunpy/pull/4321">PR #4321</a> where work is in progress for the new implementation for the generalization. QueryResponeBlock is removed from the client.py since by few changes in the QueryResponse enables us to do it all using a dictionary. Similarly <a href="https://github.com/sunpy/sunpy/pull/4321/files">a lot of methods were removed or changed</a> under the aim to simplify the two Generic Classes.</p>
<p>Not only the base class, even the client class were made simple. For simple clients, we are supposed to only define required attrs, optional attrs, a baseurl, and an extractor which makes the search working.</p>
<p>After this refactoring, the example dataretriever source client class would look something like this:</p>
<iframe src="." width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/759cceb1f744c525c6a55e80b8f9ecb9/href">https://medium.com/media/759cceb1f744c525c6a55e80b8f9ecb9/href</a></iframe><p>Only a class method and few class attributes are sufficient for defining a simple DR client!</p>
<h5>Hooks for translating attrs</h5>
<p>There are some clients which deviate from generalization. For those clients, it was discussed in a meeting with mentors that post-hooks and pre-hooks for scraper are to be designed which shall perform a translation of attrs provided in the search to their representation in the url. While working around it, I discovered few bugs in fermi_gbm and other clients to be addressed in scraper hooks. Responses for Detector numbers 10 and 11 were never returned because in the url they were represented by na and nb respectively. They will be fixed by translators as a part of pre-hook before passing it to the scraper.</p>
<h5>Moving Rhessi out from Generic</h5>
<p>Since rhessi didn’t follow the Generalization as the metadata can’t just be extracted from the file URL, so it is being implemented as subclass of base_client.</p>
<p>Every week we move closer and closer to Generalization :). Enjoying the meetings where I and my mentors discuss the pros and cons of different designs of GenericClient!</p>
<img src="https://medium.com/_/stat?event=post.clientViewed&amp;referrerSource=full_rss&amp;postId=1879f5dfe436" width="1" height="1">
</div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../../categories/sunpy/" rel="tag">SunPy</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../20200629_0011_theand9/" rel="prev" title="gsoc_journey.update({“Chapter 1”: [“Community Bonding Phase”, “Stingray”]})">Previous post</a>
            </li>
            <li class="next">
                <a href="../20200629_1911_kakirastern/" rel="next" title="GSoC 2020: glue-solar project 1.2">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer">
            Contents © 2024         <a href="mailto:openastronomy@openastronomy.com">OpenAstronomy</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
<img alt="Creative Commons License BY-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>
            
            
        </footer>
</div>
</div>


        <script src="../../../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
